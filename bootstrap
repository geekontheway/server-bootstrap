#! /bin/bash

function explain_pkg {
    printf "  $1\t\t$2\n"
}

function show_usage {
    printf "Usage: $0 <package>\n\n"
    explain_pkg "deps" "install dependencies - this should be run first"
    explain_pkg "vim" "build and install vim 7.3 from source"
}

PACKAGE=$1
shift

if [ -z $PACKAGE ]
then
    show_usage
    exit 1
fi

if [[ $PACKAGE != "deps" && ! -f /var/cache/DEPS_INSTALLED ]]
then
    echo "You need to run the following command before performing any further operation:"
    printf "\t$0 deps\n"
    exit 1
fi

export NUM_OF_CORES=`cat /proc/cpuinfo | grep processor | wc -l`
$PACKAGE/setup.sh $@
